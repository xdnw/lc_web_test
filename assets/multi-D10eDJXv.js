import{r as e,j as a,a as t,L as s}from"./index-dWbV2YWN.js";import{K as n}from"./endpoints-C8SDwtyd.js";import{g as r,B as i}from"./button-BYsJFizr.js";import{T as o}from"./timestamp-ykkkBbSZ.js";import{E as d}from"./bulkwrapper-lVatfgrI.js";import{f as l}from"./table_util-DcgUt5Gf.js";import{D as m}from"./DataTable-BzuxNtBf.js";function c({columns:t,data:s,renderers:n,sort:r}){const i=e.useRef(null),o=e.useMemo((()=>Array.from(Array(t.length).keys())),[t]),d=e.useMemo((()=>new Set),[]),[c,u]=e.useState(s),[p,x]=e.useState(t.map(((e,a)=>({title:e,index:a,render:n&&n[a]?l(n[a]):void 0})))),[h,b]=e.useState(r);return e.useMemo((()=>a.jsx(m,{table:i,data:c,columnsInfo:p,sort:h,searchSet:d,visibleColumns:o,setColumns:x,setData:u,setSort:b,showExports:!0})),[c,p,h,d,o,i])}function u(e,a,t,s,n){return 0==e?"None":-1==e?"N/A":(a||(a=t+":"+e),"nation"==t&&s&&(a="&#x3C;&#x3C;BANNED&#x3E;&#x3E; "+a),void 0===n?`[${a}](https://politicsandwar.com/${t}/id=${e})`:`[${a}](/#/${n}/${e})`)}const p=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{nation:e}=t();return a.jsx(d,{endpoint:n,args:{nation:e,forceUpdate:r().get("update")??"false"},children:({data:e})=>{const t=Object.values(e.network).map((a=>[u(a.id,e.nationNames[a.id]??a.id,"nation",e.bans[a.id],"multi"),a.lastAccessFromSharedIP,a.numberOfSharedIPs,a.lastActiveMs,u(a.allianceId,e.allianceNames[a.allianceId]??a.allianceId,"alliance",void 0,void 0),a.dateCreated])),n=e.trade.map((a=>[u(a.sellingNation,e.nationNames[a.sellingNation]??a.sellingNation,"nation",e.bans[a.sellingNation]),u(a.buyingNation,e.nationNames[a.buyingNation]??a.buyingNation,"nation",e.bans[a.buyingNation]),a.dateOffered,a.resource,a.amount,a.ppu]));return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"themeDiv bg-opacity-10 p-2",children:["Multi Buster info for: ",a.jsx("a",{href:`https://politicsandwar.com/nation/id=${e.nationId}`,children:e.nationNames[e.nationId]??e.nationId}),a.jsx("br",{}),"Last updated: ",a.jsx(o,{millis:e.dateFetched}),a.jsx("hr",{className:"my-1"}),e.dateFetched<Date.now()-864e5&&a.jsx(i,{variant:"outline",size:"sm",className:"border-red-800/70",asChild:!0,children:a.jsx(s,{to:"?update=true",children:"Update"})})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("div",{className:"themeDiv bg-opacity-10 rounded-t",children:[a.jsx("h2",{className:"text-2xl w-full border-b border-secondary px-2 bg-primary/10",children:"Shared Networks (Unique IDs)"}),a.jsx("div",{className:"p-2",children:a.jsx(c,{columns:["ID","Last Access From Shared IP","Number Of Shared IPs","Last Active Ms","Alliance ID","Date Created"],data:t,renderers:["normal","time_ms","comma","time_ms","normal","time_ms"],sort:{idx:3,dir:"desc"}})})]}),a.jsxs("div",{className:"themeDiv bg-opacity-10 mt-2 rounded-t",children:[a.jsx("h2",{className:"text-2xl w-full border-b border-secondary px-2 bg-primary/10",children:"Same Network Trades"}),a.jsx("div",{className:"p-2",children:a.jsx(c,{columns:["Selling Nation","Buying Nation","Date Offered","Resource","Amount","PPU"],data:n,renderers:["normal","normal","time_ms",void 0,"comma","comma"]})})]})]})}})},renderLink:u},Symbol.toStringTag,{value:"Module"}));export{c as T,p as m,u as r};
