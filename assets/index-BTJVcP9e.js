import{j as e,r as s,L as r}from"./index-dWbV2YWN.js";import{M as a}from"./MarkupRenderer-CugZClZz.js";import{B as t,a as i}from"./button-BYsJFizr.js";import{U as n,M as l,B as d,a as c,b as o,L as m,f as h,c as x,C as p}from"./endpoints-C8SDwtyd.js";import{u}from"./copytoclipboard-Cy7DO2po.js";import b from"./index-CE8Bwiu9.js";import{E as j}from"./bulkwrapper-lVatfgrI.js";import{A as g}from"./apiform-Cee87rao.js";import"./SimpleChart-CDY-4U1s.js";import"./theme-provider-UldqYbSh.js";import"./StateUtil-moXfkR8g.js";import"./loading-DZKuFaBE.js";import"./input-hcSfkvL2.js";import"./table_util-DcgUt5Gf.js";import"./SessionContext-UTYWUXxA.js";import"./useQuery-DQU7waJ6.js";import"./useSuspenseQuery-C4hISphF.js";function f(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(y,{}),e.jsx(k,{}),e.jsx($,{}),e.jsx(b,{}),e.jsx(S,{})]})}function y(){return e.jsx(j,{endpoint:l,args:{},children:({data:s})=>e.jsx(v,{audits:s})})}function v({audits:r}){const[i,n]=s.useState(!1);if(0===Object.keys(r.values).length)return e.jsx("div",{className:"text-green-500 mb-1 p-1 border-green-500/25 bg-accent relative rounded-sm",children:"You have passed all audits..."});const l=e=>{switch(e){case 0:return"bg-yellow-600/20 border-yellow-500/50 text-yellow-700 dark:text-yellow-100 rounded-sm";case 1:return"bg-orange-600/20 border-orange-500/50 text-orange-600 dark:text-orange-100 rounded-sm";case 2:return"bg-red-600/20 border-red-500/50 text-red-600 dark:text-red-100 rounded-sm";default:return""}},d=s.useCallback((()=>{n((e=>!e))}),[n]);return e.jsxs("div",{className:"bg-light/10 border border-light/10 p-2 mt-2 rounded",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Audits"}),e.jsx(t,{variant:"outline",size:"sm",className:"absolute border-primary/20 top-1 right-1",onClick:d,children:i?"Show Less":"Show More"})]}),e.jsx("div",{className:"p-1 relative rounded",children:r.values.map(((s,r)=>e.jsxs("div",{className:`p-0.5 mb-0.5 border ${l(s.severity)} break-all`,children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("span",{className:"font-bold",children:[s.audit,": ",s.value]})}),e.jsx("div",{className:"transition-all duration-100 ease-in-out "+(i?"p-1 max-h-screen opacity-100":"max-h-0 opacity-0 overflow-hidden"),children:e.jsx(a,{content:s.description})})]},r)))})]})}function N(){const a=s.useRef(-1),[i,l]=s.useState(!1),d=s.useCallback((e=>{a.current=e,l(!i)}),[i]);return e.jsx(j,{endpoint:n,args:{},children:({data:s})=>(-1===a.current&&(a.current=s.value),e.jsxs("div",{className:(0===a.current?"text-primary/80 border-secondary":"text-red-500 border-red-500/25")+" border w-full mb-1 p-1 relative bg-accent rounded",children:[e.jsx(t,{variant:"outline",size:"sm",className:"mr-1 border-primary/20",asChild:!0,children:e.jsx(r,{to:"/announcements",children:"View"})}),0===a.current?"No new announcements":`You have ${a.current} unread announcements...`,0!==a.current&&e.jsx(w,{setUnreadCount:d})]}))})}function w({setUnreadCount:r}){const{showDialog:a}=u(),t=s.useCallback((()=>{r(0),a("Dismissed All",e.jsx(e.Fragment,{children:"Marked all announcements as read"}))}),[r,a]);return e.jsx(g,{endpoint:o,label:"Dismiss All",handle_response:t,classes:"absolute top-1 right-1"})}function k(){return e.jsxs("div",{className:"bg-light/10 border border-light/10 p-2 rounded mt-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Banking"}),e.jsx(j,{endpoint:d,args:{},children:({data:s})=>e.jsx(_,{access:s})})]})}function _({access:s}){Object.keys(s).length,Object.values(s).some((e=>e>0));const a={Balance:[["Self","balance/self"]]};return e.jsx("div",{className:"p-1 mb-1 relative bg-accent rounded",children:Object.keys(a).map(((s,i)=>e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold",children:s}),a[s].map(((s,a)=>e.jsx(t,{variant:"outline",size:"sm",className:"border-primary/20 mr-1",asChild:!0,children:e.jsx(r,{to:`/${s[1]}`,children:s[0]})},a)))]},i)))})}function S(){return e.jsx("div",{className:"p-2 my-1 bg-accent",children:"No grants are available at this time"})}function $(){return e.jsx(j,{endpoint:c,args:{},children:({data:s})=>e.jsx(M,{wars:s})})}function M({wars:a}){const[i,n]=s.useState(!1);if(0===a.offensives.length&&0===a.defensives.length)return e.jsx("div",{className:"bg-accent rounded p-1",children:e.jsx("h2",{children:"You currently have no wars"})});const l=s.useCallback((()=>{n((e=>!e))}),[n]);return e.jsxs("div",{className:"bg-light/10 border border-light/10 p-2 rounded mt-2",children:[e.jsx("div",{className:"w-full",children:e.jsxs("a",{href:"https://politicsandwar.com/nation/war/",className:"text-2xl mt-2 font-bold underline hover:no-underline",children:[a.offensives.length+a.defensives.length," Active Wars",e.jsx(m,{name:"ExternalLink",className:"inline h-5"})]})}),e.jsxs("div",{className:"mt-1 text-sm relative w-full",children:[e.jsx(t,{variant:"secondary",size:"sm",className:"border-slate-600 w-full text-center",onClick:l,children:i?"Collapse Wars":"Show Wars"}),e.jsxs("div",{className:"transition-all duration-200 ease-in-out "+(i?"p-1 opacity-100":"max-h-0 opacity-0 overflow-hidden"),children:[a.isFightingActives&&e.jsxs(e.Fragment,{children:[e.jsx(C,{me:a.me,mywars:a}),e.jsx("div",{className:"bg-teal-500/50 p-1 mt-1",children:"It is recommended to repurchase lost units after each attack"})]}),!a.isFightingActives&&e.jsx(e.Fragment,{children:e.jsx(t,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs(r,{to:"https://politicsandwar.com/nation/military/",children:["Buy military ",e.jsx(m,{name:"ExternalLink",className:"h-4"})]})})}),a.offensives.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-lg",children:"Offensives"}),a.offensives.map(((s,r)=>e.jsx(A,{me:a.me,war:s,isAttacker:!0},r)))]}),a.defensives.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{children:"Defensives"}),a.defensives.map(((s,r)=>e.jsx(A,{me:a.me,war:s,isAttacker:!1},r)))]})]})]})]})}function C({me:s,mywars:a}){const i=[{type:"soldiers",cap:a.soldier_cap,current:s.soldier,url:"https://politicsandwar.com/nation/military/soldiers/"},{type:"tanks",cap:a.tank_cap,current:s.tank,url:"https://politicsandwar.com/nation/military/tanks/"},{type:"aircraft",cap:a.aircraft_cap,current:s.aircraft,url:"https://politicsandwar.com/nation/military/aircraft/"},{type:"navy",cap:a.ship_cap,current:s.ship,url:"https://politicsandwar.com/nation/military/navy/"},{type:"spies",cap:a.spy_cap,current:s.spies,url:"https://politicsandwar.com/nation/military/spies/"},{type:"missiles",cap:1,current:s.missile,url:"https://politicsandwar.com/nation/military/missiles/"},{type:"nukes",cap:1,current:s.nuke,url:"https://politicsandwar.com/nation/military/missiles/"}];return e.jsxs(e.Fragment,{children:["Buy: ",i.map(((s,a)=>e.jsx(t,{variant:"outline",size:"sm",className:"inline",asChild:!0,children:e.jsx(r,{to:s.url,className:""+(1.05*s.current<s.cap?"bg-card":"bg-card/40"),children:s.type},a)},s.type)))]})}function A({me:s,war:a,isAttacker:n}){const l=Date.now();return e.jsx("div",{className:"border-2 border-red-200 dark:border-red-900 bg-slate-500/50 mb-5 rounded-md",children:e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-red-200 dark:bg-red-900",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Nation"}),e.jsx("th",{scope:"col",children:"Alliance"}),e.jsx("th",{scope:"col",children:"🏙️"}),e.jsx("th",{scope:"col",children:"💂"}),e.jsx("th",{scope:"col",children:"⚙️"}),e.jsx("th",{scope:"col",children:"✈️"}),e.jsx("th",{scope:"col",children:"🚢"}),e.jsx("th",{scope:"col",children:"🚀/☢️"}),e.jsx("th",{scope:"col",children:"Off/Def"}),e.jsx("th",{scope:"col",children:"MAP"}),e.jsx("th",{scope:"col",children:"Resist"})]})}),e.jsxs("tbody",{className:"divide-solid",children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"border border-gray-500/25 p-1",children:[e.jsx("a",{className:"text-blue-500 hover:text-blue-600 active:text-blue-400 underline",href:`https://politicsandwar.com/nation/id=${a.target.id}`,children:a.target.nation}),a.target.active_ms>1464e5&&e.jsxs("span",{className:"badge bg-secondary ms-1",children:["inactive ",h(Math.round((l-a.target.active_ms)/1e3),2)]}),(n?a.def_fortified:a.att_fortified)&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Fortified",children:e.jsx(m,{name:"Shield",className:"h-4 inline"})}),1==a.blockade&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Blockaded",children:e.jsx(m,{name:"Sailboat",className:"h-4 inline"})}),-1==a.ac&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Air Control",children:e.jsx(m,{name:"Plane",className:"h-4 inline"})}),-1==a.gc&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Ground Control",children:e.jsx(m,{name:"Settings",className:"h-4 inline"})}),a.iron_dome&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Iron Dome (30% chance to block missile)",children:"ID"}),a.vds&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Vital Defense System (25% chance to thwart nukes)",children:"VDS"})]}),e.jsx("td",{className:"border border-gray-500/25 p-1",children:e.jsx("a",{className:"text-blue-500 hover:text-blue-600 active:text-blue-400 underline",href:`https://politicsandwar.com/nation/id=${a.target.alliance_id}`,children:a.target.alliance})}),e.jsx("td",{className:"border border-gray-500/25 p-1",children:a.target.cities}),e.jsx("td",{className:"border border-gray-500/25 p-1",style:{color:`rgb(${Math.min(255,Math.max(0,255*a.ground_str/(4*s.strength)))}, 0, 0)`},children:a.target.soldier}),e.jsx("td",{className:"border border-gray-500/25 p-1",style:{color:`rgb(${Math.min(255,Math.max(0,255*a.ground_str/(4*s.strength)))}, 0, 0)`},children:a.target.tank}),e.jsx("td",{className:"border border-gray-500/25 p-1",style:{color:`rgb(${Math.min(255,Math.max(0,255*a.target.aircraft/(5*s.aircraft)))}, 0, 0)`},children:a.target.aircraft}),e.jsx("td",{className:"border border-gray-500/25 p-1",style:{color:`rgb(${Math.min(255,Math.max(0,255*a.target.ship/(5*s.ship)))}, 0, 0)`},children:a.target.ship}),e.jsxs("td",{className:"border border-gray-500/25 p-1",children:[a.target.missile,"/",a.target.nuke]}),e.jsxs("td",{className:"border border-gray-500/25 p-1",children:[a.target.off,"/",a.target.def]}),e.jsx("td",{className:"border border-gray-500/25 p-1",children:e.jsx("div",{className:"px-1 text-secondary font-bold text-center",style:{width:`${Math.max(10,(n?a.def_map:a.att_map)/.12)}%`,backgroundColor:`rgb(${i(255-255*(n?a.def_map:a.att_map)/.12,0,255)}, ${i(255*(n?a.def_map:a.att_map)/.12,0,255)}, 0)`},children:n?a.def_map:a.att_map})}),e.jsx("td",{className:"border border-gray-500/25 p-1",children:e.jsx("div",{className:"px-1 text-secondary font-bold text-center","aria-valuenow":n?a.def_res:a.att_res,"aria-valuemin":0,"aria-valuemax":100,style:{width:`${Math.max(10,n?a.def_res:a.att_res)}%`,backgroundColor:`rgb(${i(255-255*(n?a.def_res:a.att_res)/100,0,255)}, ${i(255*(n?a.def_res:a.att_res)/100,0,255)}, 0)`},children:n?a.def_res:a.att_res})})]}),e.jsxs("tr",{className:"border-top border-1 border-secondary",children:[e.jsxs("td",{className:"border border-gray-500/25 p-1",children:[e.jsx("a",{className:"text-blue-500 hover:text-blue-600 active:text-blue-400 underline",href:`https://www.politicsandwar.com/nation/id=${s.id}`,children:s.nation}),(n?a.att_fortified:a.def_fortified)&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Fortified",children:e.jsx(m,{name:"Shield",className:"h-4 inline"})}),-1==a.blockade&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Blockaded",children:e.jsx(m,{name:"Sailboat",className:"h-4 inline"})}),1==a.ac&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Air Control",children:e.jsx(m,{name:"Plane",className:"h-4 inline"})}),1==a.gc&&e.jsx("span",{className:"badge bg-secondary ms-1",title:"Ground Control",children:e.jsx(m,{name:"Settings",className:"h-4 inline"})})]}),e.jsx("td",{className:"border border-gray-500/25 p-1",children:e.jsx("a",{className:"text-blue-500 hover:text-blue-600 active:text-blue-400 underline",href:`https://www.politicsandwar.com/alliance/id=${s.alliance_id}`,children:s.alliance})}),e.jsx("td",{className:"border border-gray-500/25 p-1",children:s.cities}),e.jsx("td",{className:"border border-gray-500/25 p-1",style:{color:`rgb(0, ${Math.min(255,Math.max(0,255*s.strength/(4*a.ground_str)))}, 0)`},children:s.soldier}),e.jsx("td",{className:"border border-gray-500/25 p-1",style:{color:`rgb(0, ${Math.min(255,Math.max(0,255*s.strength/(4*a.ground_str)))}, 0)`},children:s.tank}),e.jsx("td",{className:"border border-gray-500/25 p-1",style:{color:`rgb(0, ${Math.min(255,Math.max(0,255*s.aircraft/(5*a.target.aircraft)))}, 0)`},children:s.aircraft}),e.jsx("td",{className:"border border-gray-500/25 p-1",style:{color:`rgb(0, ${Math.min(255,Math.max(0,255*s.ship/(5*a.target.ship)))}, 0)`},children:s.ship}),e.jsxs("td",{className:"border border-gray-500/25 p-1",children:[s.missile,"/",s.nuke]}),e.jsxs("td",{className:"border border-gray-500/25 p-1",children:[s.off,"/",s.def]}),e.jsx("td",{className:"border border-gray-500/25 p-1",children:e.jsx("div",{className:"px-1 text-secondary font-bold text-center",style:{width:`${Math.max(10,(n?a.att_map:a.def_map)/.12)}%`,backgroundColor:`rgb(${i(255-255*(n?a.att_map:a.def_map)/.12,0,255)}, ${i(255*(n?a.att_map:a.def_map)/.12,0,255)}, 0)`},children:n?a.att_map:a.def_map})}),e.jsx("td",{className:"border border-gray-500/25 p-1",children:e.jsx("div",{className:"px-1 text-secondary font-bold text-center","aria-valuenow":n?a.att_res:a.def_res,"aria-valuemin":0,"aria-valuemax":100,style:{width:`${Math.max(10,n?a.att_res:a.def_res)}%`,backgroundColor:`rgb(${i(255-255*(n?a.att_res:a.def_res)/100,0,255)}, ${i(255*(n?a.att_res:a.def_res)/100,0,255)}, 0)`},children:n?a.att_res:a.def_res})})]}),e.jsxs("tr",{className:"border-top border-1 border-secondary",children:[e.jsx("td",{colSpan:3,children:e.jsx(t,{variant:"secondary",size:"sm",className:"w-full",asChild:!0,children:e.jsx(r,{to:`https://politicsandwar.com/nation/war/timeline/war=${a.id}`,children:"War Link"})})}),e.jsx("td",{colSpan:2,children:e.jsx(t,{variant:"secondary",size:"sm",className:"w-full",asChild:!0,children:e.jsx(r,{to:`https://politicsandwar.com/nation/war/groundbattle/war=${a.id}`,children:"💂 ground attack"})})}),e.jsx("td",{children:e.jsx(t,{variant:"secondary",size:"sm",className:"w-full",asChild:!0,children:e.jsx(r,{to:`https://politicsandwar.com/nation/war/airstrike/war=${a.id}`,children:"✈️ airstrike"})})}),e.jsx("td",{children:e.jsx(t,{variant:"secondary",size:"sm",className:"w-full",asChild:!0,children:e.jsx(r,{to:`https://politicsandwar.com/nation/war/navalbattle/war=${a.id}`,children:"🚢 naval"})})}),e.jsx("td",{className:"d-flex justify-content-center",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"w-1/2 p-0 inline-block",children:e.jsx(t,{variant:"secondary",size:"sm",asChild:!0,className:"w-full me-0.5",children:e.jsx(r,{to:`https://politicsandwar.com/nation/war/missile/war=${a.id}`,children:"🚀"})})}),e.jsx("div",{className:"w-1/2 p-0 inline-block",children:e.jsx(t,{variant:"secondary",size:"sm",asChild:!0,className:"w-full ms-0.5",children:e.jsx(r,{to:`https://politicsandwar.com/nation/war/nuke/war=${a.id}`,children:"☢️"})})})]})})]}),e.jsx("tr",{className:"border-bottom border-1 border-secondary mb-2",children:e.jsxs("td",{colSpan:100,children:[e.jsx(D,{me:s,war:a}),null!=a.beigeReasons&&n&&!1]})})]})]})})}function F({title:s,attStr:r,defStr:a}){return e.jsxs("div",{children:[e.jsxs("h5",{children:["Odds ",s,": ",x(r)," vs ",x(a)]}),e.jsx("div",{className:"flex w-full h-4 text-xs",children:(()=>{const s=[0,1,2,3].map((e=>({success:e,odds:100*B(r,a,e)}))).filter((({odds:e})=>e>0));return 0===s.length?e.jsx(z,{odds:100,success:0}):s.map((({success:s,odds:r})=>e.jsx(z,{odds:r,success:s},s)))})()})]})}function z({odds:s,success:r}){if(s<=0)return null;return e.jsx("div",{className:`grow ${["bg-red-600","bg-yellow-600","bg-blue-600","bg-green-600"][r]}`,style:{width:`${s}%`},"aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,children:e.jsxs("div",{className:"whitespace-nowrap break-keep overflow-hidden",children:[Math.round(s),"% ",["Utter Failure","Pyrrhic Victory","Moderate Success","Immense Triumph"][r]]})})}function D({me:r,war:a}){const[t,i]=s.useState(!1),n=s.useCallback((()=>i((e=>!e))),[i]);return e.jsxs("div",{className:"bg-card/50 rounded",children:[e.jsxs("button",{className:"w-full btn-sm "+(t?"":"collapsed"),type:"button",onClick:n,"aria-expanded":t,"aria-controls":`collapseodds${a.id}`,children:[t?e.jsxs(e.Fragment,{children:[e.jsx(m,{name:"ChevronUp",className:"inline"}),"Hide"]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{name:"ChevronDown",className:"inline"}),"Show"]})," odds"]}),e.jsx("div",{id:`collapseodds${a.id}`,"aria-labelledby":`headingodds${a.id}`,className:"transition-all duration-200 ease-in-out "+(t?"p-1 max-h-screen opacity-100":"max-h-0 opacity-0 overflow-hidden"),children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-red-600 align-middle inline-block me-1 border-2 border-black",style:{width:"1em",height:"1em"}}),"Utter Failure"]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-yellow-600 align-middle inline-block me-1 border-2 border-black",style:{width:"1em",height:"1em"}}),"Pyrrhic Victory"]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-blue-600 align-middle inline-block me-1 border-2 border-black",style:{width:"1em",height:"1em"}}),"Moderate Success"]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-green-600 align-middle inline-block me-1 border-2 border-black",style:{width:"1em",height:"1em"}}),"Immense Triumph"]}),r.soldier>.3*a.ground_str&&e.jsx(F,{title:"Soldiers (unarmed) v Enemy",attStr:r.soldier,defStr:a.ground_str}),1.75*r.soldier>.3*a.ground_str&&e.jsx(F,{title:"Soldiers (munitions) v Enemy",attStr:1.75*r.soldier,defStr:a.ground_str}),r.strength>0&&e.jsx(F,{title:"Ground",attStr:r.strength,defStr:a.ground_str}),r.aircraft>0&&e.jsx(F,{title:"Airstrike",attStr:r.aircraft,defStr:a.target.aircraft}),r.ship>0&&e.jsx(F,{title:"Naval",attStr:r.ship,defStr:a.target.ship})]})})]})}function B(e,s,r){const a=.4*(e=Math.pow(e,.75)),t=e,i=.4*(s=Math.pow(s,.75)),n=s;if(e<=0)return 0;if(2.5*s<=e)return 3===r?1:0;if(t<=i||n<=a)return 0;const l=(t-a)*(n-i),d=Math.min(t,n)-Math.max(a,i);let c=d*d*.5/l;if(e>s&&(c=1-c),c<=0)return 0;if(c>=1)return 1;const o=r;return Math.pow(c,o)*Math.pow(1-c,3-o)*(O(3)/(O(o)*O(3-o)))}function O(e){return e<=1?1:e*O(e-1)}p.options.BeigeReason.options;export{N as AnnouncementSection,v as AuditComponent,y as AuditSection,_ as BankAccess,k as BankSection,w as DismissAnnouncements,S as GrantSection,$ as MyWarsSection,F as OddsComponent,z as OddsSuccess,D as ShowOddsComponent,A as WarComponent,M as WarsComponent,f as default};
